<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    th:replace="~{/views/layout::dynamic(~{::body})}">
<head>
    <meta charset="UTF-8">
    <title>Book Car</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/views/css/style.css">
</head>
<body>
    <!-- Navbar -->
    <div th:replace="views/layout/navbar :: nav"></div>

    <!-- Hero Section -->
    <div class="hero-wrap" style="background-image: url('/images/car-5.jpg');" data-stellar-background-ratio="0.5">
        <div class="overlay"></div>
        <div class="container text-center">
            <h1 class="mb-4">Fast &amp; Easy Way To Rent A Car</h1>
            <p class="lead">Experience a seamless way to rent cars at affordable prices.</p>
        </div>
    </div>

    <!-- Car Information Section -->
    <div class="container mt-5">
        <h1>Car Information</h1>
        <table class="table table-striped table-bordered mt-4">
            <thead class="thead-dark">
                <tr>
                    <th>Car Name</th>
                    <th>Car Brand</th>
                    <th>Color</th>
                    <th>Address</th>
                    <th>Price/Day</th>
                    <th>Image</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td th:text="${car.carName}"></td>
                    <td th:text="${car.carBrand != null ? car.carBrand.brandName : 'N/A'}"></td>
                    <td th:text="${car.color}"></td>
                    <td th:text="${car.address}"></td>
                    <td th:text="${car.priceHoursCar}"></td>
                    <td>
                        <img th:if="${car.imageCar != null}" 
                             th:src="@{/images/{car.imageCar.image1}(car.imageCar.image1=${car.imageCar.image1})}" 
                             alt="Car Image" class="img-thumbnail" style="width: 100px; height: auto;">
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Booking Form -->
    <div class="container mt-5">
        <h2>Book Car</h2>

        <!-- Success Message -->
        <div th:if="${successMessage}" class="alert alert-success">
            <p th:text="${successMessage}"></p>
        </div>

        <form th:action="@{/booking/submit}" method="post" th:object="${booking}" enctype="multipart/form-data">
            <input type="hidden" th:field="*{carID}" readonly />

				<div class="mb-3">
					<label for="customerName" class="form-label">Customer Name</label>
					<input type="text" class="form-control" id="customerName"
						th:field="*{customerName}" required>
				</div>
				<div class="mb-3">
					<label for="rentalStart" class="form-label">Rental Start
						Date</label> <input type="date" class="form-control" id="rentalStart"
						th:field="*{rentalDay}" required th:min="${minRentalDay}">
				</div>
				<div class="mb-3">
					<label for="rentalEnd" class="form-label">Rental End Date</label> <input
						type="date" class="form-control" id="rentalEnd"
						th:field="*{returnDay}" required min="*{rentalDay}">
				</div>
				<div class="mb-3">
					<label for="phoneNumber" class="form-label">Phone Number</label> <input
						type="tel" class="form-control" id="phoneNumber"
						th:field="*{phoneNumber}" required>
				</div>
				<div class="mb-3">
					<label for="address" class="form-label">Address</label> <input
						type="text" class="form-control" id="address"
						th:field="*{address}" required>
				</div>
				
				
				<div class="h3" th:text="${mes}"></div>
				<br>
				<div class="d-flex">
				<button type="submit" class="btn btn-primary">Confirm
					Booking
				</button>
				
				</div>	
						
			</form>
		</div>
		<footer class="ftco-footer ftco-bg-dark ftco-section mt-3"
			th:fragment="footer" style="background-color: black; color: white;">
			<div class="container">
				<div class="row mb-5">
					<div class="col-md">
						<div class="ftco-footer-widget mb-4">
							<h2 class="ftco-heading-2">
								<a href="#" class="logo">Car<span>book</span></a>
							</h2>
							<p>Far far away, behind the word mountains, far from the
								countries Vokalia and Consonantia, there live the blind texts.</p>
							<ul
								class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
								<li class="ftco-animate"><a href="#"><span
										class="icon-twitter"></span></a></li>
								<li class="ftco-animate"><a href="#"><span
										class="icon-facebook"></span></a></li>
								<li class="ftco-animate"><a href="#"><span
										class="icon-instagram"></span></a></li>
							</ul>
						</div>
					</div>
					<div class="col-md">
						<div class="ftco-footer-widget mb-4 ml-md-5">
							<h2 class="ftco-heading-2">Information</h2>
							<ul class="list-unstyled">
								<li><a href="#" class="py-2 d-block">About</a></li>
								<li><a href="#" class="py-2 d-block">Services</a></li>
								<li><a href="#" class="py-2 d-block">Term and
										Conditions</a></li>
								<li><a href="#" class="py-2 d-block">Best Price
										Guarantee</a></li>
								<li><a href="#" class="py-2 d-block">Privacy &amp;
										Cookies Policy</a></li>
							</ul>
						</div>
					</div>
					<div class="col-md">
						<div class="ftco-footer-widget mb-4">
							<h2 class="ftco-heading-2">Customer Support</h2>
							<ul class="list-unstyled">
								<li><a href="#" class="py-2 d-block">FAQ</a></li>
								<li><a href="#" class="py-2 d-block">Payment Option</a></li>
								<li><a href="#" class="py-2 d-block">Booking Tips</a></li>
								<li><a href="#" class="py-2 d-block">How it works</a></li>
								<li><a href="#" class="py-2 d-block">Contact Us</a></li>

    <!-- Footer -->
  
						<p>
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
							Copyright &copy;
							<script>
								document.write(new Date().getFullYear());
							</script>
							All rights reserved | This template is made with <i
								class="icon-heart color-danger" aria-hidden="true"></i> by <a
								href="https://colorlib.com" target="_blank">Colorlib</a>
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						</p>
					</div>
				</div>
			</div>
		</footer>
		<script>
    // Hàm cộng thêm 1 ngày vào một giá trị ngày
    function addOneDay(dateString) {
        const date = new Date(dateString); // Chuyển chuỗi thành đối tượng Date
        date.setDate(date.getDate() + 1); // Cộng thêm 1 ngày
        return date.toISOString().split('T')[0]; // Định dạng lại thành chuỗi yyyy-MM-dd
    }

    // Lắng nghe sự kiện thay đổi giá trị ngày bắt đầu
    document.getElementById("rentalStart").addEventListener("change", function () {
        // Lấy giá trị ngày bắt đầu và cộng thêm 1 ngày
        const startDate = this.value;
        const minEndDate = addOneDay(startDate); // Cộng thêm 1 ngày

        // Đặt giá trị min cho trường ngày kết thúc
        const rentalEnd = document.getElementById("rentalEnd");
        rentalEnd.min = minEndDate;

        // Nếu ngày kết thúc hiện tại nhỏ hơn ngày min, reset giá trị ngày kết thúc
        if (rentalEnd.value && rentalEnd.value < minEndDate) {
            rentalEnd.value = "";
        }
    });
</script>

</body>
</html>
